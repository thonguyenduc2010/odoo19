<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="agent_response_history_form_view" model="ir.ui.view">
        <field name="name">Agent Response History Form View</field>
        <field name="model">agent.response.history</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="state" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="copilot_agent_id" readonly="1"/>
                            <field name="action_type" readonly="1"/>
                            <field name="run_time_of" readonly="1"/>
                        </group>
                        <group>
                            <field name="description" no_label="1" placeholder="Add Description..." readonly="1"/>
                            <field name="action_state" readonly="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Response History Steps">
                            <field name="agent_response_history_step_ids">
                                <list create="false" delete="false" >
                                    <field name="sequence" widget="handle"/>
                                    <field name="title"/>
                                    <field name="response" />
                                    <field name="step"/>
                                    <button name="action_download_excel"
                                        string="Excel Export"
                                        type="object"
                                        icon="fa-eye"
                                        class="btn btn-primary" invisible="step == 1"/>
                                    <button name="action_download_pdf"
                                        string="PDF Export"
                                        type="object"
                                        icon="fa-eye"
                                        class="btn btn-primary"/>

                                    <button name="run_manually"
                                        string="Run Manually"
                                        type="object"
                                        icon="fa-play"
                                        class="btn btn-primary"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <footer>
                    <button name="apply_now" string="Apply Now" type="object" class="btn-primary" context="{'from_form': True}"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>


    <record id="agent_response_history_tree_view" model="ir.ui.view">
       <field name="name">Agent Response History Tree View</field>
       <field name="model">agent.response.history</field>
       <field name="arch" type="xml">
           <list>
               <field name="copilot_agent_id"/>
               <field name="action_type"/>
               <field name="run_time_of" />
               <field name="action_state"/>
               <field name="description" width="85px"/>
               <field name="state"/>
               <button name="open_review_response"
                    string="Review"
                    type="object"
                    icon="fa-eye"
                    class="btn btn-primary"/>
           </list>
       </field>
    </record>


    <record id="action_agent_response_history" model="ir.actions.act_window">
       <field name="name">Agent Response History</field>
       <field name="res_model">agent.response.history</field>
       <field name="view_mode">list,form</field>
       <field name="help" type="html">
           <p class="o_view_nocontent_smiling_face">
               Agent Response History
           </p>
       </field>
    </record>


    <record id="agent_response_history_form_view_custom_design" model="ir.ui.view">
        <field name="name">Agent Response History Form View Custom</field>
        <field name="model">agent.response.history</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group style="font-size: 16px; font-weight: bold;">
                        <group>
                            <field name="copilot_agent_id"/>
                            <field name="run_time_of" string="Run Date"/>
                            <field name="copilot_agent_status" string="Status"/>
                        </group>
                    </group>
                    <field name="agent_response_history_step_ids" widget="x2many_accordion" context="{'contentField': 'text_response', 'labelField': 'title', 'has_confirmation': 'has_user_confirmation'}">
                        <list>
                            <field name="title"/>
                            <field name="text_response" />
                            <field name="output_response" />
                            <field name="template_id"/>
                            <field name="step"/>
                            <field name="final_step" invisible="1"/>
                            <field name="has_user_confirmation" invisible="1"/>
                            <button name="confirm_and_review" type="object" string="Confirm &amp; Review" class="btn-primary ms-2 mt-2 me-2" invisible="final_step == False"/>
                            <!-- <button name="apply_now" type="object" string="View Response 2" class="btn-secondary ms-2 mt-2"/> -->
                        </list>
                    </field>
                </sheet>
                <!-- <footer> -->
                    <!-- <button name="apply_now" string="Apply Now" type="object" class="btn-primary"/> -->
                    <!-- <button string="Cancel" class="btn-secondary" special="cancel"/> -->
                <!-- </footer> -->
            </form>
        </field>
    </record>

</odoo>