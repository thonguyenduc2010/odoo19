<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template id="chat_message_report_template">
        <t t-call="web.basic_layout">
            <div class="page" style="font-family: Arial, sans-serif; line-height: 1.5; display: flex; flex-direction: column;  margin: 20px;">

                <div style="text-align: left;  margin-bottom: 30px; color: #333;">
                    <div style="font-size: 23px; font-weight: bold;">
                        Question: <t t-esc="custom_message" />
                    </div>
                    <div style="font-size: 12px;">
                        Created at: <t t-esc="create_date" />
                    </div>
                    <div style="font-size: 12px;">
                        User: <t t-esc="user.name" />
                    </div>
                </div>


                <t t-foreach="line_items" t-as="item">
                    <div style="padding: 3px; margin-bottom: 15px; background-color: lightgray; border-radius: 8px;  ">
                        <div style="font-size: 16px; text-align: center; font-weight: bold; color: #333;">
                            Title: <t t-raw="item['title']" />
                        </div>
                    </div>
<!--                    <t t-if="item['text']">-->
<!--                        <div style=" padding: 10px; margin-bottom: 20px; background-color: #E8F9FF; border-radius: 8px;  ">-->
<!--                            <div style="font-size: 14px; color: #555;">-->
<!--                                    <t t-raw="item['text']" />-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </t>-->

                    <t t-if="item['text_response']">
                        <div style="font-size: 14px; background-color: #E8F9FF; padding: 10px; margin-bottom: 20px; border-radius: 8px;">
                            <t t-raw="item['text_response']" />
                        </div>
                    </t>
                </t>
            </div>
        </t>
    </template>

    <data>
        <record id="action_chat_message_model" model="ir.actions.report">
            <field name="name">AI Agent Response Report</field>
            <field name="model">agent.response.history</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">odoo_ai_agent.chat_message_report_template</field>
            <field name="print_report_name">'%s Report' % object.name</field>
        </record>
    </data>
</odoo>